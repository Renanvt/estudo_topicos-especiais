[ğŸ‘ˆ ](https://github.com/Renanvt/topicos-especiais)

# TÃ³picos

[ RefatoraÃ§Ã£o ]( #refatoraÃ§Ã£o)

# RefatoraÃ§Ã£o

Uma **RefatoraÃ§Ã£o** Ã© uma transformaÃ§Ã£o que preserva comportamento.

Uma **RefatoraÃ§Ã£o** Ã© uma alteraÃ§Ã£o feita na estrutura interna do software para tornÃ¡-lo mais fÃ¡cil de ser entendido e menos custoso de ser modificado sem alterar seu comportamento observÃ¡vel.

**RefatoraÃ§Ã£o** Ã© a mudanÃ§a de um cÃ³digo fonte, na estrutura interna do software, visando melhorar o entendimento e a manutenibilidade sem alterar seu comportamento e suas funÃ§Ãµes externas. 

A **RefatoraÃ§Ã£o** surgiu quando alguns desenvolvedores foram analisar seus cÃ³digos para alterar ou incluir novas funcionalidades, e notaram que os cÃ³digos jÃ¡ existentes estavam em grande parte desestruturados, trechos repetidos e de difÃ­cil compreensÃ£o e manutenÃ§Ã£o.

RazÃµes para refatorar um cÃ³digo:

![Imgur](https://i.imgur.com/ffQDP0T.png)

### CÃ³digo legÃ­vel por humano
 
- Ao escrever cÃ³digos, devemos produzir um mÃ©todo que seja legÃ­vel por humanos. 

- Para exemplificar, seguem dois cÃ³digos que produzem a mesma data:

![Imgur](https://i.imgur.com/1UPjOxu.png)


### Refatorar x Reescrever 

![Imgur](https://i.imgur.com/WlK55iW.png)

**RefatoraÃ§Ã£o** Ã© tornar o software mais fÃ¡cil de entender e modificar. 

**RefatoraÃ§Ã£o** nÃ£o altera o comportamento observÃ¡vel do software. Esse ainda executa a mesma funÃ§Ã£o de antes. Qualquer usuÃ¡rio, seja ele um usuÃ¡rio final ou outro programador, nÃ£o Ã© capaz de dizer que algo mudou


## Quando refatorar?

A refatoraÃ§Ã£o pode surgir pode surgir em dois momentos:
 
- Para melhorar o cÃ³digo existente 
- Quando temos que jogar fora e comeÃ§ar do zero.

TrÃªs vezes vocÃª refatora: 

**Refatore quando acrescentar funÃ§Ãµes**
**Refatore quando precisar consertar uma falha**
**Refatore enquanto revisa o cÃ³digo**

## RefatoraÃ§Ã£o â€“ Maus Cheiros no cÃ³digo


O fato de vocÃª saber como a RefatoraÃ§Ã£o funciona, nÃ£o significa que sabe quando usÃ¡-la. 

Decidir quando parar a RefatoraÃ§Ã£o Ã© tÃ£o importante quanto saber a sua mecÃ¢nica. 

Para isso, temos um **catÃ¡logo de â€œmaus cheirosâ€** -> para ser usado quando nÃ£o estiver certo sobre a RefatoraÃ§Ã£o a ser feita. 

Este **catÃ¡logo** ajuda a:
Identificar o que o desenvolvedor estÃ¡ sentido
Identificar e detectar o mau cheiro no cÃ³digo 
Apontar a direÃ§Ã£o certa, quando for realizar a RefatoraÃ§Ã£o.

## RefatoraÃ§Ã£o â€“ CatÃ¡logo de Maus Cheiros no cÃ³digo

**CÃ³digo duplicado mostrando desperdÃ­cio**: se vocÃª vir o mesmo cÃ³digo em mais de um lugar, ele estÃ¡ duplicado e com certeza seu sistema ficarÃ¡ melhor se vocÃª encontrar um meio de unificÃ¡-los.

**MÃ©todo longo**: quanto maior for o procedimento, mais difÃ­cil Ã© entendÃª-lo. 

**Classe grande**: quando uma classe tenta fazer muita coisa, ela frequentemente tem variÃ¡veis de instÃ¢ncia demais. 

**Lista de parÃ¢metros longa**: se a lista de parÃ¢metros for longa demais ou as alteraÃ§Ãµes frequentes demais, vocÃª precisa repensar sua estrutura de dependÃªncia.

**AlteraÃ§Ã£o divergente**: quando uma classe Ã© frequentemente alterada de diferentes maneiras por diferentes razÃµes.

**Cirurgia com rifle**: quando, cada vez que executa uma mudanÃ§a, tem que fazer muitas alteraÃ§Ãµes pequenas em muitas classes diferentes.

**Inveja dos dados**: um indÃ­cio clÃ¡ssico de problema Ã© um mÃ©todo que parece mais interessado em uma classe diferente daquela na qual ele se encontra. O foco mais comum da inveja sÃ£o os dados. 

**Grupos de dados**: os dados tendem a ser como crianÃ§as gostam de ficar em grupos. Agrupamento de dados que perambulam juntos, na verdade, deveriam ser criados no seu prÃ³prio objeto.

**Comandos Switch**: um dos fenÃ´menos mais Ã³bvios do cÃ³digo orientado a objetos Ã© sua comparativa falta de comandos switch (ou case). O problema com os comandos switch Ã© essencialmente o da duplicaÃ§Ã£o. 

**Hierarquias paralelas de heranÃ§a**: cada vez que vocÃª cria uma subclasse de uma determinada classe, tem tambÃ©m que criar uma subclasse de outra. 

**Classe ociosa**: uma classe que nÃ£o esteja fazendo o suficiente para se pagar deve ser eliminada

**Generalidade Especulativa**: pode ser identificada quando os Ãºnicos usuÃ¡rios de um mÃ©todo ou classe forma os casos de teste. 

**Campo TemporÃ¡rio**: Ã s vezes vocÃª encontra um objeto no qual uma variÃ¡vel de instÃ¢ncia recebe um valor apenas em determinadas circunstÃ¢ncias. 

**Cadeias de Mensagens**: VocÃª se depara com cadeias de mensagens quando um cliente pede um objeto para outro objeto, ao qual o cliente pede entÃ£o outro objeto, ao qual o cliente pede entÃ£o outro objeto e assim por diante. 

**IntermediÃ¡rio**: vocÃª olha uma interface de uma classe e descobre que metade dos mÃ©todos delegam para outra classe.

**Intimidade inadequada**: Ã s vezes as classes se tornam Ã­ntimas demais e gastam tempo demais sondando as partes privadas das outras. Classes Ã­ntimas demais precisam ser separadas. 

**HeranÃ§a recusada**: Subclasses conseguem herdar mÃ©todos e dados de seus pais, mas e se nÃ£o quiserem ou precisarem do que lhes Ã© dados? Elas recebem todos estes Ã³timos presentes e escolhem apenas alguns para brincar. Isso significa que a hierarquia estÃ¡ errada.

**ComentÃ¡rios**: nÃ£o se preocupe, pode usar comentÃ¡rios no seu cÃ³digo, eles nÃ£o cheiros ruins. SÃ£o considerados cheiro doce, pois muitas vezes sÃ£o usados como desodorantes. Pois Ã© com muita frequÃªncia que se vÃª cÃ³digos cheios de comentÃ¡rios e percebe que eles estÃ£o lÃ¡ porque o cÃ³digo Ã© ruim.

**RefatoraÃ§Ã£o** pode apresentar riscos se aplicada da forma errada, como:

- Atraso do projeto
- IntroduÃ§Ã£o de falhas no sistema
- Tornar o cÃ³digo ilegÃ­vel e nÃ£o modificÃ¡vel. 

Portanto Ã© uma **mudanÃ§a que deve ser efetuada com cuidado.**

## CatÃ¡logo de RefatoraÃ§Ã£o para PadrÃµes

Segundo Fowler (2004, p. 95):

â€œEste catalogo nÃ£o Ã© de forma alguma completo ou fechado, mas deve **fornecer uma base solida** para o seu **prÃ³prio trabalho de refatoraÃ§Ã£o**â€.

- Vamos falar sobre o **formato de refatoraÃ§Ãµes** criado por Fowler.

- **Formato de RefatoraÃ§Ãµes**: trata-se de um formato padrÃ£o, em que cada refatoraÃ§Ã£o representa cinco partes.

Formato das RefatoraÃ§Ãµes:

![Imgur](https://i.imgur.com/zVezRui.png)

## CatÃ¡logo de TÃ©cnicas de RefatoraÃ§Ã£o para PadrÃµes


As tÃ©cnicas de RefatoraÃ§Ã£o, sÃ£o diferentes padrÃµes que se dividem em categorias:

- Compondo MÃ©todos
- Movendo Recursos Entre Objetos
- Simplificando ExpressÃµes Condicionais
- Tornado as Chamadas de MÃ©todos Mais Simples
- Organizando Dados
- Lidando com GeneralizaÃ§Ã£o

**Compondo MÃ©todos**: esta categoria agrupa tÃ©cnicas que sÃ£o utilizadas para a composiÃ§Ã£o de mÃ©todos para empacotar cÃ³digos apropriadamente, ajudando a reduzir o acoplamento e a sua complexidade. 

![Imgur](https://i.imgur.com/PA0DnQX.png)

Exemplo Compondo MÃ©todos -> Extrair MÃ©todo: constitui-se em dividir o mÃ©todo grande em pequenos fragmentos. 

![Imgur](https://i.imgur.com/amVibv6.png)

**Movendo Recursos Entre Objetos**: uma das decisÃµes mais fundamentais, no projeto orientado a objetos Ã© onde colocar as responsabilidadesâ€. E a refatoraÃ§Ã£o Ã© usada para redefinir essas decisÃµes fundamentais. 

![Imgur](https://i.imgur.com/Il9rm1C.png)

**Movendo Recursos Entre Objetos -> Mover mÃ©todo**: se um mÃ©todo estÃ¡ usando ou sendo usado por mais recursos de outra classe do que a classe na qual ele estÃ¡ definido, **crie um novo mÃ©todo** com o corpo similar e transforme o mÃ©todo antigo em uma simples delegaÃ§Ã£o ou remova completamente. 

![Imgur](https://i.imgur.com/vHmQSMl.png)


**Exemplo Movendo Recursos Entre Objetos -> Mover mÃ©todo**: se um mÃ©todo estÃ¡ usando ou sendo usado por mais recursos de outra classe do que a classe na qual ele estÃ¡ definido, **crie um novo mÃ©todo** com o corpo similar e transforme o mÃ©todo antigo em uma simples delegaÃ§Ã£o ou remova completamente. 

![Imgur](https://i.imgur.com/Z8y1sRu.png)

**Exemplo Movendo Recursos Entre Objetos -> Extrair Classe**: se vocÃª tem uma classe fazendo um trabalho que deveria ser feito por duas, crie uma nova classe e mova os campos e mÃ©todos pertinentes da classe antiga para a nova. 

![Imgur](https://i.imgur.com/MsAdOcV.png)

**Simplificando ExpressÃµes Condicionais**: a lÃ³gica condicional pode ser refatorada e regra bÃ¡sica Ã© "quebraâ€ de uma expressÃ£o condicional em partes. Isso Ã© importante porque separa a lÃ³gica variante dos detalhes do que ocorre.

![Imgur](https://i.imgur.com/fnNJttY.png)

**Exemplo Simplificando ExpressÃµes Condicionais -> Decompor condicional**: de uma estrutura condicional complicada (if-then-else), extraia mÃ©todos da condiÃ§Ã£o, da parte apÃ³s o then e da parte apÃ³s o else.

![Imgur](https://i.imgur.com/Tpr2CO6.png)

**Tornado as Chamadas de MÃ©todos Mais Simples**: este conjunto de refatoraÃ§Ãµes explora a utilizaÃ§Ã£o da refatoraÃ§Ã£o para tornar as interfaces mais diretas; produzindo interfaces que sejam mais fÃ¡ceis de entender e usar.

![Imgur](https://i.imgur.com/fVFkS79.png)

**Exemplo Tornado as Chamadas de MÃ©todos Mais Simples -> Renomear MÃ©todo**: se vocÃª tem um nome de um mÃ©todo que nÃ£o revela seu propÃ³sito, altere o nome do mÃ©todo.

![Imgur](https://i.imgur.com/QlhNqzb.png)

**Organizando Dados:**  Ã© um conjunto de tÃ©cnicas de refatoraÃ§Ãµes que sÃ£o extremamente Ãºteis e que tornam mais fÃ¡cil o tratamento de dados, utilizando linguagem de programaÃ§Ã£o orientada a objetos, que podem permitir a definiÃ§Ã£o de novos tipos que vÃ£o alÃ©m do que pode ser feito com os tipos de dados simples das linguagens tradicionais.

![Imgur](https://i.imgur.com/pSKa10h.png)

**Exemplo Organizando Dados -> Auto-encapsular campo**: se vocÃª estÃ¡ acessando um campo diretamente, mas o acoplamento a esse campo estÃ¡ se tornando inadequado, entÃ£o crie mÃ©todos de acesso ao campo e use apenas estes mÃ©todos para acessar o campo.

![Imgur](https://i.imgur.com/guNAW6S.png)

**Lidando com GeneralizaÃ§Ã£o**: generalizaÃ§Ãµes produzem seu prÃ³prio lote de refatoraÃ§Ãµes, a maior parte delas lidando com a movimentaÃ§Ã£o de mÃ©todos por uma hierarquia de heranÃ§a.

![Imgur](https://i.imgur.com/qoiLXzF.png)

**Exemplo Lidando com GeneralizaÃ§Ã£o -> Subir Campo na Hierarquia**: vocÃª tem duas subclasses que tem o mesmo campo, entÃ£o mova o campo para a superclasse.

![Imgur](https://i.imgur.com/U7QDCHh.png)

# [ğŸ‘† TÃ“PICOS](#tÃ³picos)